--[[


    This AntiCheat Was Made By ANT!

    This is a SERVER script



    This Anti Cheat Detected Speed, JumpBoost, And Tp cheats.
]]

local maxJump = game:GetService("StarterPlayer").CharacterJumpPower + 5

local maxSpeed = game:GetService("StarterPlayer").CharacterWalkSpeed + 5

local tpDist = 10 -- about 100 studs

local playerS = game:GetService("Players")

local rs = game:GetService("RunService")

local function getPlayers()
    return playerS:GetPlayers()
end

local LastPositions = {}

local function UpdatePos(plr)
   task.spawn(function()
       local char = plr.Character or plr.CharacterAdded:Wait()
       for i, info in pairs(LastPositions) do
          if not info["User"] == plr then continue end
          if (char:GetPivot().Position - info["CFrame"].Position).Magnitude > tpDist then plr:Kick("Teleportation Detected!") end
          table.remove(LastPositions, i)
       end
       table.insert(LastPositions, {
         ["User"] = plr,
         ["CFrame"] = char:GetPivot()
       })
   end)
end

rs.Heartbeat:Connect(function()
    task.spawn(function()
        for _, plr in pairs(getPlayers()) do
            task.spawn(function()
                local char = plr.Character or plr.CharacterAdded:Wait()
                UpdatePos(plr)
                if not char:FindFirstChild("HumanoidRootPart") then return end
                if char:FindFirstChild("HumanoidRootPart").Velocity.Y > maxJump then plr:Kick("JumpBoost Detected, Kicked By Plasma AntiCheat!") end
                local X = char:FindFirstChild("HumanoidRootPart").Velocity.X
                local Z = char:FindFirstChild("HumanoidRootPart").Velocity.Z
                if X > maxSpeed or X < -maxSpeed then plr:Kick("Speed Detected, Kicked By Plasma AntiCheat!") end
                if Z > maxSpeed or Z < -maxSpeed then plr:Kick("Speed Detected, Kicked By Plasma AntiCheat!") end
            end)
        end
    end)
end)
